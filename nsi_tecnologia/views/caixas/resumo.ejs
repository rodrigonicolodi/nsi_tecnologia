<table class="tabela">
  <thead>
    <tr>
      <th>Nome</th>
      <th>Valor Inicial</th>
      <th>Ajustes</th>
      <th>Recebido</th>
      <th>Total</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <% 
      let somaInicial = 0;
      let somaAjustes = 0;
      let somaRecebido = 0;
      let somaTotal = 0;

      caixas.forEach(c => {
        const inicial = parseFloat(c.valor_inicial || 0);
        const ajustes = parseFloat(c.total_ajustes || 0);
        const recebido = parseFloat(c.total_receber || 0);
        const total = inicial + ajustes + recebido;

        somaInicial += inicial;
        somaAjustes += ajustes;
        somaRecebido += recebido;
        somaTotal += total;
    %>
      <tr>
        <td><%= c.nome %></td>
        <td>R$ <%= inicial.toFixed(2) %></td>
        <td>R$ <%= ajustes.toFixed(2) %></td>
        <td>R$ <%= recebido.toFixed(2) %></td>
        <td><strong>R$ <%= total.toFixed(2) %></strong></td>
        <td><%= c.ativo ? 'Ativo' : 'Inativo' %></td>
      </tr>
    <% }) %>
  </tbody>
  <tfoot>
    <tr>
      <th>Total Geral</th>
      <th>R$ <%= somaInicial.toFixed(2) %></th>
      <th>R$ <%= somaAjustes.toFixed(2) %></th>
      <th>R$ <%= somaRecebido.toFixed(2) %></th>
      <th><strong>R$ <%= somaTotal.toFixed(2) %></strong></th>
      <th></th>
    </tr>
  </tfoot>
</table>