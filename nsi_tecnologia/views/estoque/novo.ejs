<% layout = 'layout' %>
<% titulo = 'Novo Produto' %>

<div class="container">
  <h2><%= titulo %></h2>

  <% if (erro) { %>
    <p class="erro"><%= erro %></p>
  <% } %>

  <form action="/estoque/novo" method="POST" class="form-coluna">
    <div class="campo">
      <label for="nome">Nome</label>
      <input type="text" id="nome" name="nome" required>
    </div>

    <div class="campo">
      <label for="codigo">Código</label>
      <input type="text" id="codigo" name="codigo" value="<%= codigoGerado %>">
    </div>

    <div class="campo">
      <label for="categoria">Categoria</label>
      <input type="text" id="categoria" name="categoria">
    </div>

    <div class="campo">
      <label for="marca">Marca</label>
      <input type="text" id="marca" name="marca">
    </div>

    <div class="campo">
      <label for="modelo">Modelo</label>
      <input type="text" id="modelo" name="modelo">
    </div>

    <div class="campo">
      <label for="unidade">Unidade</label>
      <select id="unidade" name="unidade">
        <option value="UN">Unidade</option>
        <option value="KG">Quilo</option>
        <option value="LT">Litro</option>
        <option value="MT">Metros</option>
      </select>
    </div>

    <div class="campo">
      <label for="custo">Custo</label>
      <input type="number" step="0.01" id="custo" name="custo">
    </div>

    <div class="campo">
      <label for="preco_venda">Preço de Venda</label>
      <input type="number" step="0.01" id="preco_venda" name="preco_venda">
    </div>

    <div class="campo">
      <label for="estoque_atual">Estoque Atual</label>
      <input type="number" id="estoque_atual" name="estoque_atual">
    </div>

    <div class="campo">
      <label for="estado">Estado</label>
      <select id="estado" name="estado">
        <option value="novo">Novo</option>
        <option value="usado">Usado</option>
      </select>
    </div>

    <div class="campo">
      <label for="status">Status</label>
      <select id="status" name="status">
        <option value="ativo">Ativo</option>
        <option value="inativo">Inativo</option>
      </select>
    </div>

    <div class="campo" style="grid-column: 1 / -1;">
      <label for="descricao_tecnica">Descrição Técnica</label>
      <textarea id="descricao_tecnica" name="descricao_tecnica" rows="4"></textarea>
    </div>

    <div class="campo" style="grid-column: 1 / -1; text-align: center;">
      <button type="submit" class="btn-azul" id="btn-salvar-produto">
        <i class="fas fa-save"></i> Salvar Produto
      </button>
    </div>
  </form>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.querySelector('form');
    const botao = document.getElementById('btn-salvar-produto');

    form.addEventListener('submit', function () {
      botao.disabled = true;
      botao.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Salvando...';
    });
  });
</script>